require(["dojo/dom","dojo/on","dojo/dom-style","dojo/query","dojo/dom-class","dojo/fx","dojo/dom-attr","dojo/_base/fx","dojo/request/script","dojo/json","dojo/ready"],    function(dom, on, domStyle, query, domClass, coreFx, domAttr, fx, script, JSON, ready){        ready(function(){            var prizeText = ['1','2','3','4','5','6','7','8','9'];            var oUl = document.getElementById("lotteryUnit");            var oLi = oUl.getElementsByTagName("li");            var width = oLi[0].clientWidth;            var prize = 2;            var prizeValue;            for( var i = 0, length = oLi.length; i < length; i++){                oLi[i].style.height = width+'px';                // oLi[i].innerHTML = prizeText[i];            }            oLi[4].innerHTML = 'start';            if( prize == '2'){                prizeValue = 1;            }            var sureBtn = document.getElementById('sureBtn');            var lottery={                index:-1,	//当前转动到哪个位置，起点位置                count:0,	//总共有多少个位置                timer:0,	//setTimeout的ID，用clearTimeout清除                speed:20,	//初始转动速度                times:0,	//转动次数                cycle:50,	//转动基本次数：即至少需要转动多少次再进入抽奖环节                prize:-1,	//中奖位置                init:function(){                    if (query(".lottery-unit").length>0) {                        $lottery = dom.byId("#lottery");                        $units = query(".lottery-unit");                        this.obj = $lottery;                        this.count = $units.length;                        query(".lottery-unit-"+this.index).addClass("active");                    };                },                roll:function(){                    var index = this.index;                    var count = this.count;                    var lottery = this.obj;                    query(".lottery-unit-"+index).removeClass("active");                    index += 1;                    if (index>count-1) {                        index = 0;                    };                    query(".lottery-unit-"+index).addClass("active");                    this.index=index;                    return false;                },                stop:function(index){                    this.prize=index;                    return false;                }            };            function roll(){                lottery.times += 1;                lottery.roll();                if (lottery.times > lottery.cycle+10 && lottery.prize == lottery.index) {                    clearTimeout(lottery.timer);                    if (popup.offsetHeight === 0) {                        // 不可见，调用Slider.slideDown函数：在300毫秒内下拉                        Slider.slideDown(popup, 300);                    };                    lottery.prize=-1;                    lottery.times=0;                    click=false;       //  如果已经点击则点击失效，运动停止后可以再次点击                }else{                    if (lottery.times<lottery.cycle) {                        lottery.speed -= 10;                    }else if(lottery.times==lottery.cycle) {                        // var index = Math.random()*(lottery.count)|0;                        lottery.prize = prizeValue;   // 设置奖品中奖位置                    }else{                        if (lottery.times > lottery.cycle+10 && ((lottery.prize==0 && lottery.index==7) || lottery.prize==lottery.index+1)) {                            lottery.speed += 110;                        }else{                            lottery.speed += 20;                        }                    }                    if (lottery.speed < 40) {                        lottery.speed=40;                    };                    lottery.timer = setTimeout(roll,lottery.speed);                }                return false;            }            var click=false;            window.onload=function(){                var readyTwo = function(){                    lottery.init('lottery');                    on(dom.byId('start'), 'click', function(){                        if (click) {                            return false;                        } else {                            lottery.speed=100;                            roll();                            click=true;                            sureBtn.onclick = function(){                                Slider.slideUp(popup, 300);                            };                            return false;                        }                    });                };                readyTwo();                // 判断是否登录                // if(document.getElementById('hdnReqTyp').value == 1){                //     dom.byId('scrollUl').innerHTML = '<li>您还没有登录，无法查看记录</li>';                //     on(dom.byId('pointer'), 'click', readyOne);                // } else if(document.getElementById('hdnReqTyp').value == 2){                //     readyTwo();                // }                // function readyOne(){                //     document.getElementById('hdnReqTyp').value = "2";                //     frm_act05.submit();                // }            };            var myTab = function(){                var n = 10;                var timer = null;                on(dom.byId('ruleLi'), 'click', function(){                    clearInterval(timer);                    domClass.remove(dom.byId('record'), 'act');                    domClass.add(dom.byId('rule'), 'act');                });                on(dom.byId('recordLi'), 'click', function(){                    domClass.remove(dom.byId('rule'), 'act');                    domClass.add(dom.byId('record'), 'act');                    clearInterval(timer);                    var h = dom.byId('scrollUl').clientHeight;                    if(h>170){                        timer = setInterval(function(){                            n+=1;                            if(n>(h-120)){n=10;}                            domStyle.set('scrollUl', 'top', -n+'px');                        },50);                    };                });            };            myTab();        });    });//自适应屏幕(function(doc,win){    var docEl = doc.documentElement,        resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',        recalc = function(){            var clientWidth = docEl.clientWidth;            if(!clientWidth) return;            docEl.style.fontSize=100*(clientWidth/320)+'px';        };    //AbortifbrowserdoesnotsupportaddEventListener    if(!doc.addEventListener)return;    win.addEventListener(resizeEvt,recalc,false);    doc.addEventListener('DOMContentLoaded',recalc,false);})(document,window);